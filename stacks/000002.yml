AWSTemplateFormatVersion: 2010-09-09
Description: This is the beta template that will accept other resources
# Metadata: 

Parameters:
  OS:
    Type: String
    AllowedValues:
      - ubuntu16
      - ubuntu18
      - suse
  AvailabilityZone:
    Type: AWS::EC2::AvailabilityZone::Name
  SubnetType:
    Type: String
    AllowedValues:
      - Private
      - Public
    Default: Public

Mappings: 
  AMIMap:
    VAR_AMI_MAP

  SubnetMap:
    us-east-1a:
      Public: subnet-1ab2e551
    us-east-1b:
      Public: subnet-3aab2667
    us-east-1d:
      Private: subnet-c80e87e7
    us-east-1c:
      Private: subnet-06501962
    us-east-2a:
      Public: subnet-0ca766e0aba0bb36e
      Private: subnet-09fad3f8b283a63ef
    us-east-2c:
      Public: subnet-08b783efe3bfed00e
      Private: subnet-070bc9c800825dbd2
    us-east-2b:
      Public: subnet-0947b6bebe5425ec2
      Private: subnet-0e0cc0412cd1417c7


# Conditions: 

Resources: 
  INSTANCE1: 
    Type: "AWS::EC2::Instance"
    Properties: 
      AvailabilityZone: !Ref AvailabilityZone
      ImageId: !FindInMap [AMIMap, !Ref "AWS::Region", !Ref "OS"]
      InstanceType: t3.micro
      SubnetId: !FindInMap [SubnetMap, !Ref AvailabilityZone, !Ref SubnetType]


Outputs:
  InstanceID:
    Description: The Instance ID
    Value: !Ref INSTANCE1